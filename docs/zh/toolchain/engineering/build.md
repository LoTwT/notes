# 构建

## 应用打包

时间成本、空间成本

### 构建策略

- 减少打包时间：缩减范围、缓存副本、定向搜索、提前构建、并行构建、可视结构
- 减少打包体积：分割代码、树摇优化、动态垫片、按需加载、作用提升、压缩资源

具体描述

1. 缩减范围：缩小对文件的搜索范围，避免不必要的转译
1. 缓存副本：再次编译使只编译修改过的文件
1. 定向搜索：定向指定所需文件路径
1. 提前构建：将第三方依赖提前打包 ( 预构建 ) ，每次只构建业务代码
1. 并行构建：多进程构建，释放 CPU 多核并发优势
1. 可视结构：分析打包文件结构，可视化输出，找出构建体积过大原因
1. 分割代码：分割各个模块代码，提取相同代码，减少重复代码的出现频率
1. 树摇优化：删除项目中未被引用的代码，只支持 ESM
1. 动态垫片：通过垫片服务根据 UA 返回当前浏览器代码垫片，无需将繁重的代码垫片打包进去
1. 按需加载：将`路由页面 / 触发性功能`单独打包为一个文件，使用时才加载，减轻首屏渲染的负担
1. 作用提升：分析模块间依赖关系，把打包好的模块合并到一个函数中，减少函数声明与内存消耗
1. 压缩资源：压缩 HTML 、CSS 、JS 代码，压缩字体、图像、音频、视频，更有效减少打包体积

## 类库打包

Rollup。

合并 dts 声明插件 rollup-plugin-dts 。
