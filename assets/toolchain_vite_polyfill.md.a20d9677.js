import{_ as s,c as n,o as a,a as l}from"./app.a067e1d4.js";const p="/vite/plugin-legacy.jpg",d=JSON.parse('{"title":"\u8BED\u6CD5\u964D\u7EA7\u4E0E polyfill","description":"","frontmatter":{},"headers":[{"level":2,"title":"legacy","slug":"legacy","link":"#legacy","children":[]},{"level":2,"title":"\u5E95\u5C42\u5DE5\u5177\u94FE","slug":"\u5E95\u5C42\u5DE5\u5177\u94FE","link":"#\u5E95\u5C42\u5DE5\u5177\u94FE","children":[{"level":3,"title":"\u5DE5\u5177\u6982\u89C8","slug":"\u5DE5\u5177\u6982\u89C8","link":"#\u5DE5\u5177\u6982\u89C8","children":[]},{"level":3,"title":"\u5B9E\u9645\u4F7F\u7528","slug":"\u5B9E\u9645\u4F7F\u7528","link":"#\u5B9E\u9645\u4F7F\u7528","children":[]},{"level":3,"title":"transform-runtime","slug":"transform-runtime","link":"#transform-runtime","children":[]}]},{"level":2,"title":"Vite \u8BED\u6CD5\u964D\u7EA7\u4E0E Polyfill \u6CE8\u5165","slug":"vite-\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill-\u6CE8\u5165","link":"#vite-\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill-\u6CE8\u5165","children":[{"level":3,"title":"\u6267\u884C\u539F\u7406","slug":"\u6267\u884C\u539F\u7406","link":"#\u6267\u884C\u539F\u7406","children":[]}]}],"relativePath":"toolchain/vite/polyfill.md","lastUpdated":1669599731000}'),o={name:"toolchain/vite/polyfill.md"},e=l(`<h1 id="\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill" tabindex="-1">\u8BED\u6CD5\u964D\u7EA7\u4E0E polyfill <a class="header-anchor" href="#\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill" aria-hidden="true">#</a></h1><p>\u901A\u8FC7 Vite \u6784\u5EFA\uFF0C\u5B8C\u5168\u53EF\u4EE5\u517C\u5BB9\u5404\u79CD\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\uFF0C\u6253\u5305\u51FA\u65E2\u652F\u6301\u73B0\u4EE3 ( modern ) \u6D4F\u89C8\u5668\uFF0C\u53C8\u652F\u6301\u65E7\u7248 ( legacy ) \u6D4F\u89C8\u5668\u7684\u4EA7\u7269\u3002</p><h2 id="legacy" tabindex="-1">legacy <a class="header-anchor" href="#legacy" aria-hidden="true">#</a></h2><p>\u65E7\u7248\u6D4F\u89C8\u5668\u7684\u8BED\u6CD5\u517C\u5BB9\u95EE\u9898\u4E3B\u8981\u5206\u4E3A\uFF1A\u8BED\u6CD5\u964D\u7EA7\u548C polyfill \u7F3A\u5931\u3002</p><p>\u8BED\u6CD5\u964D\u7EA7\uFF0C\u6BD4\u5982\uFF0C\u67D0\u4E9B\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u7BAD\u5934\u51FD\u6570\uFF0C\u5C31\u9700\u8981\u5C06\u5176\u8F6C\u6362\u4E3A <code>function() {}</code> \u8BED\u6CD5\u3002</p><p>polyfill \uFF0C\u672C\u8EAB\u53EF\u4EE5\u7FFB\u8BD1\u4E3A\u57AB\u7247\uFF0C\u4E5F\u5C31\u662F\u4E3A\u6D4F\u89C8\u5668\u63D0\u524D\u6CE8\u5165\u4E00\u4E9B API \u7684\u5B9E\u73B0\u4EE3\u7801\uFF0C\u5982 <code>Object.entries</code> \u65B9\u6CD5\u7684\u5B9E\u73B0\uFF0C\u8FD9\u6837\u53EF\u4EE5\u4FDD\u8BC1\u4EA7\u7269\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u8FD9\u4E9B API \uFF0C\u9632\u6B62\u62A5\u9519\u3002</p><p>\u8FD9\u4E24\u7C7B\u95EE\u9898\uFF0C\u672C\u8D28\u4E0A\u662F\u901A\u8FC7\u524D\u7AEF\u7684\u7F16\u8BD1\u5DE5\u5177\u94FE ( \u5982 Babel ) \u4EE5\u53CA JavaScript \u7684\u57FA\u7840 Polyfill \u5E93 ( \u5982 corejs ) \u6765\u89E3\u51B3\uFF0C\u4E0D\u4F1A\u8DDF\u5177\u4F53\u7684\u6784\u5EFA\u5DE5\u5177\u7ED1\u5B9A\u3002</p><p>\u6784\u5EFA\u5DE5\u5177\u8003\u8651\u7684\u4EC5\u4EC5\u662F\u5982\u4F55\u5C06\u8FD9\u4E9B\u5E95\u5C42\u57FA\u7840\u8BBE\u65BD\u63A5\u5165\u5230\u6784\u5EFA\u8FC7\u7A0B\u7684\u95EE\u9898\uFF0C\u81EA\u5DF1\u5E76\u4E0D\u9700\u8981\u63D0\u4F9B\u5E95\u5C42\u7684\u89E3\u51B3\u65B9\u6848\u3002</p><h2 id="\u5E95\u5C42\u5DE5\u5177\u94FE" tabindex="-1">\u5E95\u5C42\u5DE5\u5177\u94FE <a class="header-anchor" href="#\u5E95\u5C42\u5DE5\u5177\u94FE" aria-hidden="true">#</a></h2><h3 id="\u5DE5\u5177\u6982\u89C8" tabindex="-1">\u5DE5\u5177\u6982\u89C8 <a class="header-anchor" href="#\u5DE5\u5177\u6982\u89C8" aria-hidden="true">#</a></h3><ul><li>\u7F16\u8BD1\u65F6\u5DE5\u5177\uFF0C\u4EE3\u8868\u6709\uFF1A<code>@babel/preset-env</code> \u548C <code>@babel/plugin-transform-runtime</code></li><li>\u8FD0\u884C\u65F6\u57FA\u7840\u5E93\uFF0C\u4EE3\u8868\u6709\uFF1A<code>core-js</code> \u548C <code>regenerator-runtime</code></li></ul><p>\u7F16\u8BD1\u65F6\u5DE5\u5177\u7684\u4F5C\u7528\u662F\u5728\u4EE3\u7801\u7F16\u8BD1\u9636\u6BB5\u8FDB\u884C\u8BED\u6CD5\u964D\u7EA7\u4EE5\u53CA\u6DFB\u52A0 polyfill \u4EE3\u7801\u7684\u5F15\u7528\u8BED\u53E5\uFF0C\u5982</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">core-js/modules/es6.set.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E9B\u5DE5\u5177\u53EA\u662F\u7F16\u8BD1\u9636\u6BB5\u7528\u5230\uFF0C\u8FD0\u884C\u65F6\u5E76\u4E0D\u9700\u8981\uFF0C\u53EA\u9700\u8981\u5C06\u5176\u653E\u5165 package.json \u7684 devDependencies \u5373\u53EF\u3002</p><p>\u800C\u8FD0\u884C\u65F6\u57FA\u7840\u5E93\u662F\u6839\u636E ECMAScript \u5B98\u65B9\u8BED\u8A00\u89C4\u8303\u63D0\u4F9B\u5404\u79CD Polyfill \u5B9E\u73B0\u4EE3\u7801\uFF0C\u4E3B\u8981\u5305\u62EC core-js \u548C regenerator-runtime \u4E24\u4E2A\u57FA\u7840\u5E93\uFF0CBabel \u4E5F\u6709\u4E00\u4E9B\u4E0A\u5C42\u7684\u5C01\u88C5\uFF0C\u5982\uFF1A</p><ol><li>@babel/polyfill</li><li>@babel/runtime</li><li>@babel/runtime-corejs2</li><li>@babel/runtime-corejs3</li></ol><p><code>@babel/runtime</code> \u662F\u4E2A\u7279\u4F8B\uFF0C\u4E0D\u5305\u542B core-js \u7684 polyfill \u3002\u8FD9\u7C7B\u5E93\u662F\u9879\u76EE\u8FD0\u884C\u65F6\u5FC5\u987B\u8981\u7528\u5230\u7684\uFF0C\u56E0\u6B64\u4E00\u5B9A\u8981\u653E\u5230 package.json \u7684 dependencies \u4E2D\u3002</p><h3 id="\u5B9E\u9645\u4F7F\u7528" tabindex="-1">\u5B9E\u9645\u4F7F\u7528 <a class="header-anchor" href="#\u5B9E\u9645\u4F7F\u7528" aria-hidden="true">#</a></h3><ul><li><code>@babel/cli</code> \uFF1A\u4E3A Babel \u5B98\u65B9\u7684\u811A\u624B\u67B6\u5DE5\u5177</li><li><code>@babel/core</code> \uFF1ABabel \u6838\u5FC3\u7F16\u8BD1\u5E93</li><li><code>@babel/preset-env</code> \uFF1ABabel \u7684\u9884\u8BBE\u5DE5\u5177\u96C6\uFF0C\u57FA\u672C\u4E3A Babel \u5FC5\u88C5\u7684\u5E93</li></ul><p>\u914D\u7F6E <code>.babelrc.json</code> \u5982\u4E0B\uFF1A</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">presets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u6307\u5B9A\u517C\u5BB9\u7684\u6D4F\u89C8\u5668\u7248\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">targets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">ie</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">11</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u6216\u4F7F\u7528 Browserslist \u914D\u7F6E\uFF0C\u56E0\u5176\u4ED6\u5DE5\u5177\u4E5F\u53EF\u80FD\u7528\u5230\uFF0C\u53EF\u4EE5\u4FEE\u6539\u4E3A\u5BF9\u5E94\u683C\u5F0F\u653E\u5230 package.json \u4E2D</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// ie \u4E0D\u4F4E\u4E8E 11 \u7248\u672C\uFF0C\u5168\u7403\u8D85\u8FC7 0.5% \u4F7F\u7528\uFF0C\u4E14\u8FD8\u5728\u7EF4\u62A4\u66F4\u65B0\u7684\u6D4F\u89C8\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// &quot;targets&quot;: &quot;ie &gt;= 11, &gt; 0.5%, not dead&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u57FA\u7840\u5E93 core-js \u7684\u7248\u672C\uFF0C\u4E00\u822C\u6307\u5B9A\u4E3A\u6700\u65B0\u7684\u5927\u7248\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// Polyfill \u6CE8\u5165\u7B56\u7565\uFF0C\u540E\u6587\u8BE6\u7EC6\u4ECB\u7ECD</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">useBuiltIns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">usage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u4E0D\u5C06 ES \u6A21\u5757\u8BED\u6CD5\u8F6C\u6362\u4E3A\u5176\u4ED6\u6A21\u5757\u8BED\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528 <code>@babel/preset-env</code> \u7684\u5C40\u9650\u6027\uFF1A</p><ol><li>\u5982\u679C\u4F7F\u7528\u65B0\u7279\u6027\uFF0C\u5F80\u5F80\u662F\u901A\u8FC7\u57FA\u7840\u5E93 ( \u5982 core-js ) \u5F80\u5168\u5C40\u73AF\u5883\u6DFB\u52A0 polyfill \uFF0C\u5982\u679C\u662F\u5F00\u53D1\u5E94\u7528\u6CA1\u6709\u4EFB\u4F55\u95EE\u9898\uFF0C\u5982\u679C\u662F\u5F00\u53D1\u7B2C\u4E09\u65B9\u5DE5\u5177\u5E93\uFF0C\u5219\u5F88\u53EF\u80FD\u4F1A\u5BF9\u5168\u5C40\u7A7A\u95F4\u9020\u6210\u6C61\u67D3</li><li>\u5F88\u591A\u5DE5\u5177\u51FD\u6570\u7684\u5B9E\u73B0\u4EE3\u7801 ( \u5982 _defineProperty \u65B9\u6CD5 ) \uFF0C\u4F1A\u5728\u8BB8\u591A\u6587\u4EF6\u4E2D\u91CD\u590D\u51FA\u73B0\uFF0C\u9020\u6210\u6587\u4EF6\u4F53\u79EF\u5197\u4F59</li></ol><h3 id="transform-runtime" tabindex="-1">transform-runtime <a class="header-anchor" href="#transform-runtime" aria-hidden="true">#</a></h3><p>\u66F4\u4F18\u7684 polyfill \u6CE8\u5165\u65B9\u6848\u3002</p><blockquote><p><code>transform-runtime</code> \u662F\u4F5C\u4E3A <code>@babel/preset-env</code> \u4E2D <code>useBuiltIns</code> \u914D\u7F6E\u7684\u66FF\u4EE3\u54C1\uFF0C\u4E00\u65E6\u4F7F\u7528\uFF0C\u9700\u8981\u5C06 <code>useBuiltIns</code> \u8BBE\u4E3A false</p></blockquote><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># \u7F16\u8BD1\u65F6\u5DE5\u5177</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm i @babel/plugin-transform-runtime -D</span></span>
<span class="line"><span style="color:#676E95;"># \u8FD0\u884C\u65F6\u57FA\u7840\u5E93\uFF0C\u5C01\u88C5\u4E86 core-js \u3001regenerator-runtime \u548C\u5404\u79CD\u8BED\u6CD5\u8F6C\u6362\u7528\u5230\u7684\u5DE5\u5177\u51FD\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm i @babel/runtime-corejs3 -S</span></span>
<span class="line"></span></code></pre></div><blockquote><p>core-js \u6709\u4E09\u79CD\u4EA7\u7269\uFF0C\u5206\u522B\u662F core-js \u3001 core-js-pure \u3001core-js-bundle \u3002\u7B2C\u4E00\u79CD\u662F\u5168\u5C40 polyfill\uFF0C\u6BD4\u5982 <code>@babel/preset-env</code> \uFF1B\u7B2C\u4E8C\u79CD\u662F\u6309\u9700\u5F15\u5165\uFF1B\u7B2C\u4E09\u79CD\u662F\u6253\u5305\u597D\u7684\u7248\u672C\uFF0C\u5305\u542B\u6240\u6709 polyfill \uFF0C\u4E0D\u592A\u5E38\u7528\u3002<code>@babel/runtime-corejs3</code> \u662F\u7B2C\u4E8C\u79CD\u4EA7\u7269\u3002</p></blockquote><p>.babelrc.json \u5982\u4E0B</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u6DFB\u52A0 transform-runtime \u63D2\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/plugin-transform-runtime</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">presets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">targets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">ie</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">11</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u5173\u95ED @babel/preset-env \u9ED8\u8BA4\u7684 Polyfill \u6CE8\u5165</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">useBuiltIns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="vite-\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill-\u6CE8\u5165" tabindex="-1">Vite \u8BED\u6CD5\u964D\u7EA7\u4E0E Polyfill \u6CE8\u5165 <a class="header-anchor" href="#vite-\u8BED\u6CD5\u964D\u7EA7\u4E0E-polyfill-\u6CE8\u5165" aria-hidden="true">#</a></h2><p>Vite \u5B98\u65B9\u63D0\u4F9B\u4E86\u5F00\u7BB1\u5373\u7528\u7684\u65B9\u6848 <code>@vitejs/plugin-legacy</code> \uFF0C\u5B83\u540C\u6837\u4F7F\u7528\u4E86 <code>@babel/preset-env</code> \u548C <code>core-js</code> \u7B49\u4E00\u7CFB\u5217\u57FA\u7840\u5E93\u3002</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm i @vitejs/plugin-legacy -D</span></span>
<span class="line"></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> legacy </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@vitejs/plugin-legacy</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u7701\u7565\u5176\u5B83\u63D2\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">legacy</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u8BBE\u7F6E\u76EE\u6807\u6D4F\u89C8\u5668\uFF0Cbrowserslist \u914D\u7F6E\u8BED\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">targets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ie &gt;= 11</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u901A\u8FC7 legacy \u63D2\u4EF6\uFF0CVite \u4F1A\u5206\u522B\u6253\u5305\u51FA Modern \u6A21\u5F0F\u548C Legacy \u6A21\u5F0F\u7684\u4EA7\u7269\uFF0C\u7136\u540E\u5C06\u4E24\u79CD\u4EA7\u7269\u63D2\u5165\u540C\u4E00\u4E2A HTML \u91CC\uFF0CModern \u4EA7\u7269\u88AB\u653E\u5230 <code>type=&quot;module&quot;</code> \u7684 script \u6807\u7B7E\u4E2D\uFF0C\u800C Legacy \u4EA7\u7269\u5219\u88AB\u653E\u5230\u5E26\u6709 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-nomodule" target="_blank" rel="noreferrer">nomodule</a> \u7684 script \u6807\u7B7E\u4E2D\uFF0C\u8FD9\u6837\u4EA7\u7269\u5C31\u80FD\u540C\u65F6\u653E\u5230\u73B0\u4EE3\u6D4F\u89C8\u5668\u548C\u4E0D\u652F\u6301 ESM \u7684\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\u4E2D\u6267\u884C\u3002</p><h3 id="\u6267\u884C\u539F\u7406" tabindex="-1">\u6267\u884C\u539F\u7406 <a class="header-anchor" href="#\u6267\u884C\u539F\u7406" aria-hidden="true">#</a></h3><p><img src="`+p+'" alt="plugin-legacy"></p>',37),t=[e];function c(r,D,y,i,F,C){return a(),n("div",null,t)}const u=s(o,[["render",c]]);export{d as __pageData,u as default};
